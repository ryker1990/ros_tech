/*! rosin-device-backend 2018-12-07 */

"use strict";var t=require("onoff"),o=e(t);function e(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function t(e){r(this,t),this.delegate=e,this.startButton=new o.default.Gpio(17,"in","both"),this.emergencyButton=new o.default.Gpio(27,"in","both"),this.isStartButtonDepressed=!0,this.isEmergencyButtonDepressed=!this.emergencyButton.readSync(),this.startButtonTimer=0,this.emergencyButtonTimer=0;var n=this;setInterval(function(){console.log(n.emergencyButton.readSync()),1===n.emergencyButton.readSync()?n.isEmergencyButtonDepressed=!1:n.isEmergencyButtonDepressed=!0,n.delegate.onCancelButton},100),this.startButton.watch(function(t,e){if(1===n.startButton.readSync())return n.isEmergencyButtonDepressed?void console.log("Emergency button is engaged. Not starting press."):void(n.isStartButtonDepressed=!n.startButton.readSync());console.log("Start button press detected: "+n.startButton.readSync()),n.isEmergencyButtonDepressed?console.log("Emergency button is engaged. Not starting press."):(n.isStartButtonDepressed=!n.startButton.readSync(),clearTimeout(n.startButtonTimer),n.startButtonTimer=setTimeout(n.delegate.onStartButton,1e3))}),this.emergencyButton.watch(function(t,e){console.log("Emergency button press detected: "+n.emergencyButton.readSync()),n.isEmergencyButtonDepressed=!n.emergencyButton.readSync(),clearTimeout(n.emergencyButtonTimer),n.emergencyButtonTimer=setTimeout(n.delegate.onCancelButton,500)})};module.exports=n;
//# sourceMappingURL=../sourcemap/ButtonsController.js